enum DroneState
{
    Leave,
    Return
}

DroneState currentState;

public Program()
{
    // Initialize the current state from the Custom Data
    string savedState = Me.CustomData;
    if (!Enum.TryParse(savedState, out currentState))
    {
        currentState = DroneState.Leave; // Default state
    }

    Runtime.UpdateFrequency = UpdateFrequency.None; // Run only when triggered
}

public void Main(string argument)
{
    // Cycle through the states
    currentState = (DroneState)(((int)currentState + 1) % Enum.GetNames(typeof(DroneState)).Length);

    // Update the Custom Data with the new state
    Me.CustomData = currentState.ToString();

    // Output the current state
    Echo("Current State: " + currentState.ToString());
}
